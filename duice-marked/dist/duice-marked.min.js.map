{"version":3,"file":"duice-marked.min.js","sources":["MarkedElement.js","MarkedElementFactory.js"],"sourcesContent":["import { ObjectElement } from \"duice\";\n/**\n * Marked Element\n */\nexport class MarkedElement extends ObjectElement {\n    /**\n     * Constructor\n     * @param htmlElement html element\n     * @param bindData bind data\n     * @param context context\n     */\n    constructor(htmlElement, bindData, context) {\n        super(htmlElement, bindData, context);\n        // creates child div\n        this.div = document.createElement('div');\n        this.getHtmlElement().appendChild(this.div);\n        // customizes responsive table\n        const renderer = new marked.Renderer();\n        renderer.table = (header, body) => {\n            return `<table style=\"display:inline-block;overflow-x:scroll;max-width:100%;\">\\n<thead>${header}</thead>\\n<tbody>${body}</tbody>\\n</table>`;\n        };\n        // config\n        this.config = {\n            headerIds: false,\n            mangle: false,\n            breaks: true,\n            gfm: true,\n            renderer: renderer\n        };\n    }\n    /**\n     * Sets value\n     * @param value value\n     */\n    setValue(value) {\n        value = value ? value : '';\n        value = marked.parse(value, this.config);\n        this.div.innerHTML = value;\n        this.div.querySelectorAll('[class^=language-]').forEach(function (pre) {\n            pre.classList.add('line-numbers');\n        });\n        // highlight\n        Prism.highlightAll();\n    }\n}\n//# sourceMappingURL=MarkedElement.js.map","import { Configuration, ObjectElementFactory } from \"duice\";\nimport { ElementRegistry } from \"duice\";\nimport { MarkedElement } from \"./MarkedElement\";\n/**\n * Marked Element Factory\n */\nexport class MarkedElementFactory extends ObjectElementFactory {\n    /**\n     * Creates element\n     * @param htmlElement html element\n     * @param bindData bind data\n     * @param context context\n     */\n    createElement(htmlElement, bindData, context) {\n        return new MarkedElement(htmlElement, bindData, context);\n    }\n}\n/**\n * Static block\n */\n(() => {\n    // register\n    ElementRegistry.register(`${Configuration.getNamespace()}-marked`, new MarkedElementFactory());\n})();\n//# sourceMappingURL=MarkedElementFactory.js.map"],"names":["MarkedElement","ObjectElement","constructor","htmlElement","bindData","context","super","this","div","document","createElement","getHtmlElement","appendChild","renderer","marked","Renderer","table","header","body","config","headerIds","mangle","breaks","gfm","setValue","value","parse","innerHTML","querySelectorAll","forEach","pre","classList","add","Prism","highlightAll","MarkedElementFactory","ObjectElementFactory","ElementRegistry","register","Configuration","getNamespace"],"mappings":";;;;;;sHAIO,MAAMA,UAAsBC,EAAAA,cAO/B,WAAAC,CAAYC,EAAaC,EAAUC,GAC/BC,MAAMH,EAAaC,EAAUC,GAE7BE,KAAKC,IAAMC,SAASC,cAAc,OAClCH,KAAKI,iBAAiBC,YAAYL,KAAKC,KAEvC,MAAMK,EAAW,IAAIC,OAAOC,SAC5BF,EAASG,MAAQ,CAACC,EAAQC,IACf,kFAAkFD,qBAA0BC,sBAGvHX,KAAKY,OAAS,CACVC,WAAW,EACXC,QAAQ,EACRC,QAAQ,EACRC,KAAK,EACLV,SAAUA,EAEjB,CAKD,QAAAW,CAASC,GACLA,EAAQA,GAAgB,GACxBA,EAAQX,OAAOY,MAAMD,EAAOlB,KAAKY,QACjCZ,KAAKC,IAAImB,UAAYF,EACrBlB,KAAKC,IAAIoB,iBAAiB,sBAAsBC,SAAQ,SAAUC,GAC9DA,EAAIC,UAAUC,IAAI,eAC9B,IAEQC,MAAMC,cACT,ECrCE,MAAMC,UAA6BC,EAAAA,qBAOtC,aAAA1B,CAAcP,EAAaC,EAAUC,GACjC,OAAO,IAAIL,EAAcG,EAAaC,EAAUC,EACnD,SAODgC,kBAAgBC,SAAS,GAAGC,gBAAcC,wBAAyB,IAAIL"}