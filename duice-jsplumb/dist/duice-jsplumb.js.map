{"version":3,"file":"duice-jsplumb.js","sources":["Jsplumb.js","JsplumbFactory.js"],"sourcesContent":["import { Configuration, Initializer, CustomElement, getElementAttribute, markInitialized, ObjectProxy, setElementAttribute, } from \"duice\";\nexport class Jsplumb extends CustomElement {\n    constructor(htmlElement, bindData, context) {\n        super(htmlElement, bindData, context);\n        this.elementItems = new Map();\n        this.sourceEndpoints = new Map();\n        this.targetEndpoints = new Map();\n        this.connectorItems = [];\n        // parse attribute\n        this.elementProperty = getElementAttribute(this.getHtmlElement(), 'element-property');\n        this.elementLoop = getElementAttribute(this.getHtmlElement(), 'element-loop');\n        this.elementIdProperty = getElementAttribute(this.getHtmlElement(), 'element-id-property');\n        let positionProperty = getElementAttribute(this.getHtmlElement(), 'element-position-property');\n        let positionPropertyParts = positionProperty.split(',');\n        this.elementPositionXProperty = positionPropertyParts[0];\n        this.elementPositionYProperty = positionPropertyParts[1];\n        this.connectorProperty = getElementAttribute(this.getHtmlElement(), 'connector-property');\n        this.connectorSourceProperty = getElementAttribute(this.getHtmlElement(), 'connector-source-property');\n        this.connectorTargetProperty = getElementAttribute(this.getHtmlElement(), 'connector-target-property');\n        // mark initialized (not using after clone as templates)\n        this.htmlElementTemplate = this.getHtmlElement().innerHTML;\n        markInitialized(htmlElement);\n        this.getHtmlElement().innerHTML = '';\n        this.container = document.createElement('div');\n        this.container.classList.add(Configuration.getNamespace() + '-diagram-container');\n        this.container.style.position = 'relative';\n        this.container.style.width = '100%';\n        this.container.style.height = '100%';\n        this.container.style.overflow = 'hidden';\n        this.container.classList.add(Configuration.getNamespace() + '-diagram-container');\n        this.container.addEventListener('click', event => {\n            event.preventDefault();\n        });\n        this.getHtmlElement().appendChild(this.createStyle());\n        this.jsPlumbInstance = jsPlumb.getInstance({\n            container: this.container,\n        });\n        this.getHtmlElement().appendChild(this.container);\n        this.jsPlumbInstance.bind('connection', (event, mouseEvent) => {\n            console.debug('== connection:', event, mouseEvent);\n            if (!mouseEvent) {\n                return;\n            }\n            event.connection.addOverlay([\"PlainArrow\", {\n                    location: 1,\n                    width: 10,\n                    length: 10,\n                    id: \"arrow\",\n                }]);\n            event.connection.addOverlay(['Label', {\n                    label: '<span style=\"cursor:pointer; font-weight:bold;\">[X]</span>',\n                    location: 0.5,\n                    events: {\n                        click: (labelOverlay, originalEvent) => {\n                            this.jsPlumbInstance.deleteConnection(event.connection);\n                        }\n                    }\n                }]);\n            let connectorSourceId = getElementAttribute(event.connection.source, 'element-id');\n            let connectorTargetId = getElementAttribute(event.connection.target, 'element-id');\n            this.addConnectorData(connectorSourceId, connectorTargetId);\n        });\n        this.jsPlumbInstance.bind('connectionMoved', event => {\n            console.debug('== connectionMoved:', event);\n            let connectorSourceId = getElementAttribute(event.originalSourceEndpoint.element, 'element-id');\n            let connectorTargetId = getElementAttribute(event.originalTargetEndpoint.element, 'element-id');\n            this.removeConnectorData(connectorSourceId, connectorTargetId);\n        });\n        this.jsPlumbInstance.bind('internal.connectionDetached', event => {\n            console.debug('== internal.connectionDetached:', event);\n            let connectorSourceId = getElementAttribute(event.connection.source, 'element-id');\n            let connectorTargetId = getElementAttribute(event.connection.target, 'element-id');\n            this.removeConnectorData(connectorSourceId, connectorTargetId);\n        });\n    }\n    createStyle() {\n        let style = document.createElement('style');\n        style.innerHTML = `\n            .${Configuration.getNamespace()}-diagram-container {\n                background-size: 1rem 1rem;\n                background-image: radial-gradient(circle, rgba(128, 128, 128, 0.25) 1px, rgba(0, 0, 0, 0) 1px);\n            }\n            .${Configuration.getNamespace()}-diagram-element {\n            }\n            .${Configuration.getNamespace()}-diagram-endpoint-source {\n                cursor: pointer;\n                opacity: 0.5;\n            }\n            .${Configuration.getNamespace()}-diagram-endpoint-source-hover {\n                opacity: 1.0;\n            }\n            .${Configuration.getNamespace()}-diagram-endpoint-target {\n                opacity: 0.5;\n            }\n            .${Configuration.getNamespace()}-diagram-endpoint-target-hover {\n                opacity: 1.0;\n            }\n            .${Configuration.getNamespace()}-diagram-connector-disconnect {\n                display: block;\n                cursor: pointer;\n                background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApElEQVR4nGNgoBHgZ2Bg0GJgYDCHYhCbjxiNrAwMDFYMDAyROLAVVA1OzV54NMOwJy5DrIjQDMOW2PwciYQfMjAwLETiL4SKIatBCRNtNEmQhn9QGpmNrAYUsHBgjsWZc6Aa/2PRHAnVg9eARVDNIEOWYZE3o6oX+EgMxAhsCcuKkmhkgCYOUCIhOyHBDAGZjk0jyNkgOZya0cMEOTNpEpuZSAYAwus8FYS1LyQAAAAASUVORK5CYII=');\n                background-size: 15px 15px;\n                width: 15px;\n                height: 15px;\n                opacity: 0.5;\n            }\n            .${Configuration.getNamespace()}-diagram-connector-disconnect:hover {\n                opacity: 1;\n            }\n        `;\n        return style;\n    }\n    doRender(object) {\n        var _a;\n        console.debug(\"doRender:\", object);\n        this.clearContainer();\n        this.jsPlumbInstance.setSuspendDrawing(true);\n        let elementArray = this.bindData[this.elementProperty];\n        let elementLoopArgs = this.elementLoop.split(',');\n        let elementItemName = elementLoopArgs[0].trim();\n        let elementStatusName = (_a = elementLoopArgs[1]) === null || _a === void 0 ? void 0 : _a.trim();\n        for (let index = 0; index < elementArray.length; index++) {\n            let elementObject = elementArray[index];\n            let context = Object.assign({}, this.getContext());\n            context[elementItemName] = elementObject;\n            context[elementStatusName] = new ObjectProxy({\n                index: index,\n                count: index + 1,\n                size: elementArray.length,\n                first: (index === 0),\n                last: (elementArray.length == index + 1)\n            });\n            this.createElementItem(elementObject, context, index);\n        }\n        let connectorArray = this.bindData[this.connectorProperty];\n        for (let index = 0; index < connectorArray.length; index++) {\n            this.createConnectorItem(connectorArray[index]);\n        }\n        this.jsPlumbInstance.setSuspendDrawing(false, true);\n        this.fitContainerToContent();\n    }\n    doUpdate(object) {\n        console.debug(\"doUpdate:\", object);\n        this.doRender(object);\n    }\n    clearContainer() {\n        this.container.innerHTML = '';\n        this.elementItems.clear();\n        this.sourceEndpoints.clear();\n        this.targetEndpoints.clear();\n        this.connectorItems.length = 0;\n    }\n    fitContainerToContent() {\n        let maxWidth = 0;\n        let maxHeight = 0;\n        this.container.querySelectorAll(`.${Configuration.getNamespace()}-diagram-element`)\n            .forEach(element => {\n            let rect = element.getBoundingClientRect();\n            let width = parseInt(element.style.left) + rect.width;\n            if (width > maxWidth) {\n                maxWidth = width;\n            }\n            let height = parseInt(element.style.top) + rect.height;\n            if (height > maxHeight) {\n                maxHeight = height;\n            }\n        });\n        maxWidth += 10;\n        maxHeight += 10;\n        this.container.style.width = maxWidth + 'px';\n        this.container.style.height = maxHeight + 'px';\n        let rect = this.getHtmlElement().parentElement.getBoundingClientRect();\n        if (maxWidth < rect.width) {\n            this.container.style.width = rect.width + 'px';\n        }\n        if (maxHeight < rect.height) {\n            this.container.style.height = rect.height + 'px';\n        }\n    }\n    createElementItem(elementObject, context, index) {\n        console.debug(\"createElementItem\", elementObject, context, index);\n        let elementId = elementObject[this.elementIdProperty];\n        let elementItem = document.createElement('div');\n        elementItem.innerHTML = this.htmlElementTemplate;\n        Initializer.initialize(elementItem, context, index);\n        setElementAttribute(elementItem, 'element-id', elementId);\n        elementItem.classList.add(Configuration.getNamespace() + '-diagram-element');\n        elementItem.style.position = 'absolute';\n        elementItem.style.left = (elementObject[this.elementPositionXProperty] || 10) + 'px';\n        elementItem.style.top = (elementObject[this.elementPositionYProperty] || 10) + 'px';\n        this.elementItems.set(elementId, elementItem);\n        this.container.appendChild(elementItem);\n        if (this.isEditable()) {\n            elementItem.style.cursor = 'move';\n            this.jsPlumbInstance.draggable(elementItem, {\n                stop: event => {\n                    console.debug(event.finalPos);\n                    elementObject[this.elementPositionXProperty] = event.finalPos[0];\n                    elementObject[this.elementPositionYProperty] = event.finalPos[1];\n                    this.fitContainerToContent();\n                }\n            });\n        }\n        let sourceEndpoint = this.jsPlumbInstance.addEndpoint(elementItem, {\n            isSource: this.isEditable(),\n            isTarget: false,\n            maxConnections: -1,\n            anchor: ['Continuous', { faces: ['bottom', 'right', 'top', 'left'] }],\n            endpoint: ['Rectangle', { width: 10, height: 10, cssClass: `${Configuration.getNamespace()}-diagram-endpoint-source`, hoverClass: `${Configuration.getNamespace()}-diagram-endpoint-source-hover` }],\n            endpointStyle: { fill: \"darkgray\", outlineStroke: 'black' },\n            connector: 'Straight',\n        });\n        this.sourceEndpoints.set(elementId, sourceEndpoint);\n        let targetEndpoint = this.jsPlumbInstance.addEndpoint(elementItem, {\n            isTarget: this.isEditable(),\n            isSource: false,\n            maxConnections: -1,\n            anchor: ['Continuous', { faces: ['top', 'left', 'bottom', 'right'] }],\n            endpoint: ['Dot', { radius: 6, cssClass: `${Configuration.getNamespace()}-diagram-endpoint-target`, hoverClass: `${Configuration.getNamespace()}-diagram-endpoint-target-hover` }],\n            endpointStyle: { fill: \"gray\" },\n        });\n        this.targetEndpoints.set(elementId, targetEndpoint);\n    }\n    createConnectorItem(connectorObject) {\n        let connectorSourceId = connectorObject[this.connectorSourceProperty];\n        let connectorTargetId = connectorObject[this.connectorTargetProperty];\n        let connectorItem = this.jsPlumbInstance.connect({\n            source: this.sourceEndpoints.get(connectorSourceId),\n            target: this.targetEndpoints.get(connectorTargetId),\n            connector: 'Straight',\n            detachable: this.isEditable(),\n            overlays: [\n                [\"PlainArrow\", {\n                        location: 1,\n                        width: 10,\n                        length: 10,\n                        id: \"arrow\"\n                    }],\n                ['Label', {\n                        label: `<span class=\"${Configuration.getNamespace() + '-diagram-connector-disconnect'}\"></span>`,\n                        location: 0.5,\n                        events: {\n                            click: (labelOverlay, originalEvent) => {\n                                if (this.isEditable()) {\n                                    this.jsPlumbInstance.deleteConnection(connectorItem);\n                                }\n                            }\n                        }\n                    }]\n            ]\n        });\n        this.connectorItems.push(connectorItem);\n    }\n    addConnectorData(connectorSourceId, connectorTargetId) {\n        console.debug(\"addConnectorData\", connectorSourceId, connectorTargetId);\n        let connectorArray = this.bindData[this.connectorProperty];\n        let index = connectorArray.findIndex(connectorObject => {\n            return connectorObject[this.connectorSourceProperty] === connectorSourceId\n                && connectorObject[this.connectorTargetProperty] === connectorTargetId;\n        });\n        if (index < 0) {\n            let connectorData = {};\n            connectorData[this.connectorSourceProperty] = connectorSourceId;\n            connectorData[this.connectorTargetProperty] = connectorTargetId;\n            connectorArray.push(connectorData);\n        }\n    }\n    removeConnectorData(connectorSourceId, connectorTargetId) {\n        console.debug(\"removeConnectorData\", connectorSourceId, connectorTargetId);\n        let linkArray = this.bindData[this.connectorProperty];\n        let indexToRemove = linkArray.findIndex(linkObject => {\n            return linkObject[this.connectorSourceProperty] === connectorSourceId\n                && linkObject[this.connectorTargetProperty] === connectorTargetId;\n        });\n        console.debug(\"== indexToRemove:\", indexToRemove);\n        if (indexToRemove > -1) {\n            linkArray.splice(indexToRemove, 1);\n        }\n    }\n    isEditable() {\n        return !ObjectProxy.isReadonlyAll(this.bindData)\n            && !ObjectProxy.isDisableAll(this.bindData);\n    }\n}\n//# sourceMappingURL=Jsplumb.js.map","import { Configuration, CustomElementFactory, DataElementRegistry } from \"duice\";\nimport { Jsplumb } from \"./Jsplumb\";\nexport class DiagramFactory extends CustomElementFactory {\n    doCreateElement(htmlElement, bindData, context) {\n        return new Jsplumb(htmlElement, bindData, context);\n    }\n}\n(() => {\n    // register\n    DataElementRegistry.register(`${Configuration.getNamespace()}-jsplumb`, new DiagramFactory());\n})();\n//# sourceMappingURL=JsplumbFactory.js.map"],"names":["CustomElement","getElementAttribute","markInitialized","Configuration","ObjectProxy","Initializer","setElementAttribute","CustomElementFactory","DataElementRegistry"],"mappings":"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"}