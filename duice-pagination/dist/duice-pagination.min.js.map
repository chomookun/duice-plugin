{"version":3,"file":"duice-pagination.min.js","sources":["Pagination.js","PaginationFactory.js"],"sourcesContent":["import { Configuration, CustomElement } from \"duice\";\nimport { getElementAttribute } from \"duice\";\nexport class Pagination extends CustomElement {\n    constructor(htmlElement, bindData, context) {\n        super(htmlElement, bindData, context);\n        this.prevContent = '<';\n        this.nextContent = '>';\n        this.pageNumberSize = 10;\n        // attributes\n        this.pageProperty = getElementAttribute(htmlElement, 'page-property');\n        this.sizeProperty = getElementAttribute(htmlElement, 'size-property');\n        this.totalProperty = getElementAttribute(htmlElement, 'total-property');\n        this.onclick = new Function(getElementAttribute(htmlElement, 'onclick'));\n        // optional\n        this.pageNumberSize = Number(getElementAttribute(htmlElement, 'page-number-size') || this.pageNumberSize);\n        this.prevContent = getElementAttribute(htmlElement, 'prev-content') || this.prevContent;\n        this.nextContent = getElementAttribute(htmlElement, 'next-content') || this.nextContent;\n    }\n    doRender(object) {\n        // page,size,count\n        let page = Number(object[this.pageProperty]);\n        let size = Number(object[this.sizeProperty]);\n        let total = Number(object[this.totalProperty]);\n        // calculate page\n        let totalPage = Math.ceil(total / size);\n        let startPageIndex = Math.floor(page / this.pageNumberSize) * this.pageNumberSize;\n        let endPageIndex = Math.min(startPageIndex + (this.pageNumberSize - 1), totalPage - 1);\n        endPageIndex = Math.max(endPageIndex, 0);\n        // template\n        let pagination = document.createElement('ul');\n        pagination.classList.add(`${Configuration.getNamespace()}-pagination`);\n        // prev\n        let prev = document.createElement('li');\n        prev.innerHTML = this.prevContent;\n        prev.classList.add(`${Configuration.getNamespace()}-pagination__item-prev`);\n        prev.dataset.page = String(Math.max(startPageIndex - this.pageNumberSize, 0));\n        prev.addEventListener('click', () => {\n            this.onclick.call(prev);\n        });\n        if (page < this.pageNumberSize) {\n            prev.classList.add(`${Configuration.getNamespace()}-pagination__item--disable`);\n        }\n        pagination.appendChild(prev);\n        // pages\n        for (let index = startPageIndex; index <= endPageIndex; index++) {\n            let item = document.createElement('li');\n            item.appendChild(document.createTextNode(String(index + 1)));\n            item.dataset.page = String(index);\n            item.classList.add(`${Configuration.getNamespace()}-pagination__item-page`);\n            if (index === page) {\n                item.classList.add(`${Configuration.getNamespace()}-pagination__item--active`);\n            }\n            item.addEventListener('click', () => {\n                this.onclick.call(item);\n            });\n            pagination.appendChild(item);\n        }\n        // next\n        let next = document.createElement('li');\n        next.innerHTML = this.nextContent;\n        next.classList.add(`${Configuration.getNamespace()}-pagination__item-next`);\n        next.dataset.page = String(Math.min(endPageIndex + 1, totalPage));\n        next.addEventListener('click', () => {\n            this.onclick.call(next);\n        });\n        if (endPageIndex >= (totalPage - 1)) {\n            next.classList.add(`${Configuration.getNamespace()}-pagination__item--disable`);\n        }\n        pagination.appendChild(next);\n        // returns\n        this.getHtmlElement().innerHTML = '';\n        this.getHtmlElement().appendChild(this.createStyle());\n        this.getHtmlElement().appendChild(pagination);\n    }\n    doUpdate(object) {\n        this.render();\n    }\n    createStyle() {\n        let style = document.createElement('style');\n        style.innerHTML = `\n            ${Configuration.getNamespace()}-pagination {\n                display: inline-block;\n            }\n            .${Configuration.getNamespace()}-pagination {\n                list-style: none;\n                display: flex;\n                padding-left: 0;\n                margin: 0;\n            }\n            .${Configuration.getNamespace()}-pagination__item-page {\n                cursor: pointer;\n                padding: 0 0.5em;\n            }\n            .${Configuration.getNamespace()}-pagination__item-prev {\n                cursor: pointer;\n                padding: 0 0.5em;\n            }\n            .${Configuration.getNamespace()}-pagination__item-next {\n                cursor: pointer;\n                padding: 0 0.5em;\n            }\n            .${Configuration.getNamespace()}-pagination__item--active {\n                font-weight: bold;\n                text-decoration: underline;\n                pointer-events: none;\n            }\n            .${Configuration.getNamespace()}-pagination__item--disable {\n                pointer-events: none;\n            }\n        `;\n        return style;\n    }\n}\n//# sourceMappingURL=Pagination.js.map","import { Configuration, CustomElementFactory } from \"duice\";\nimport { DataElementRegistry } from \"duice\";\nimport { Pagination } from \"./Pagination\";\nexport class PaginationFactory extends CustomElementFactory {\n    doCreateElement(htmlElement, bindData, context) {\n        return new Pagination(htmlElement, bindData, context);\n    }\n}\n(() => {\n    // register\n    DataElementRegistry.register(`${Configuration.getNamespace()}-pagination`, new PaginationFactory());\n})();\n//# sourceMappingURL=PaginationFactory.js.map"],"names":["Pagination","CustomElement","constructor","htmlElement","bindData","context","super","this","prevContent","nextContent","pageNumberSize","pageProperty","getElementAttribute","sizeProperty","totalProperty","onclick","Function","Number","doRender","object","page","size","total","totalPage","Math","ceil","startPageIndex","floor","endPageIndex","min","max","pagination","document","createElement","classList","add","Configuration","getNamespace","prev","innerHTML","dataset","String","addEventListener","call","appendChild","index","item","createTextNode","next","getHtmlElement","createStyle","doUpdate","render","style","PaginationFactory","CustomElementFactory","doCreateElement","DataElementRegistry","register"],"mappings":"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"}