{"version":3,"file":"duice-pagination.js","sources":["Pagination.js","PaginationFactory.js"],"sourcesContent":["import { Configuration, CustomElement } from \"duice\";\nimport { getElementAttribute } from \"duice\";\nexport class Pagination extends CustomElement {\n    constructor(htmlElement, bindData, context) {\n        super(htmlElement, bindData, context);\n        this.prevContent = '&#9664;';\n        this.nextContent = '&#9654;';\n        this.pageNumberSize = 10;\n        // attributes\n        this.pageProperty = getElementAttribute(htmlElement, 'page-property');\n        this.sizeProperty = getElementAttribute(htmlElement, 'size-property');\n        this.countProperty = getElementAttribute(htmlElement, 'count-property');\n        this.onclick = new Function(getElementAttribute(htmlElement, 'onclick'));\n        // optional\n        this.pageNumberSize = Number(getElementAttribute(htmlElement, 'page-number-size') || this.pageNumberSize);\n        this.prevContent = getElementAttribute(htmlElement, 'prev-content') || this.prevContent;\n        this.nextContent = getElementAttribute(htmlElement, 'next-content') || this.nextContent;\n    }\n    doRender(object) {\n        // page,size,count\n        let page = Number(object[this.pageProperty]);\n        let size = Number(object[this.sizeProperty]);\n        let count = Number(object[this.countProperty]);\n        // calculate page\n        let totalPage = Math.ceil(count / size);\n        let startPageIndex = Math.floor(page / this.pageNumberSize) * this.pageNumberSize;\n        let endPageIndex = Math.min(startPageIndex + (this.pageNumberSize - 1), totalPage - 1);\n        endPageIndex = Math.max(endPageIndex, 0);\n        // template\n        let pagination = document.createElement('ul');\n        pagination.classList.add(`${Configuration.getNamespace()}-pagination`);\n        // prev\n        let prev = document.createElement('li');\n        prev.innerHTML = this.prevContent;\n        prev.classList.add(`${Configuration.getNamespace()}-pagination__item-prev`);\n        prev.dataset.page = String(Math.max(startPageIndex - this.pageNumberSize, 0));\n        prev.addEventListener('click', () => {\n            this.onclick.call(prev);\n        });\n        if (page < this.pageNumberSize) {\n            prev.classList.add(`${Configuration.getNamespace()}-pagination__item--disable`);\n        }\n        pagination.appendChild(prev);\n        // pages\n        for (let index = startPageIndex; index <= endPageIndex; index++) {\n            let item = document.createElement('li');\n            item.appendChild(document.createTextNode(String(index + 1)));\n            item.dataset.page = String(index);\n            item.classList.add(`${Configuration.getNamespace()}-pagination__item-page`);\n            if (index === page) {\n                item.classList.add(`${Configuration.getNamespace()}-pagination__item--active`);\n            }\n            item.addEventListener('click', () => {\n                this.onclick.call(item);\n            });\n            pagination.appendChild(item);\n        }\n        // next\n        let next = document.createElement('li');\n        next.innerHTML = this.nextContent;\n        next.classList.add(`${Configuration.getNamespace()}-pagination__item-next`);\n        next.dataset.page = String(Math.min(endPageIndex + 1, totalPage));\n        next.addEventListener('click', () => {\n            this.onclick.call(next);\n        });\n        if (endPageIndex >= (totalPage - 1)) {\n            next.classList.add(`${Configuration.getNamespace()}-pagination__item--disable`);\n        }\n        pagination.appendChild(next);\n        // returns\n        this.getHtmlElement().innerHTML = '';\n        this.getHtmlElement().appendChild(this.createStyle());\n        this.getHtmlElement().appendChild(pagination);\n    }\n    doUpdate(object) {\n        this.render();\n    }\n    createStyle() {\n        let style = document.createElement('style');\n        style.innerHTML = `\n            ${Configuration.getNamespace()}-pagination {\n                display: inline-block;\n            }\n            .${Configuration.getNamespace()}-pagination {\n                list-style: none;\n                display: flex;\n                padding-left: 0;\n                margin: 0;\n            }\n            .${Configuration.getNamespace()}-pagination__item-page {\n                cursor: pointer;\n                padding: 0 0.5em;\n            }\n            .${Configuration.getNamespace()}-pagination__item-prev {\n                cursor: pointer;\n                padding: 0 0.5em;\n            }\n            .${Configuration.getNamespace()}-pagination__item-next {\n                cursor: pointer;\n                padding: 0 0.5em;\n            }\n            .${Configuration.getNamespace()}-pagination__item--active {\n                font-weight: bold;\n                text-decoration: underline;\n                pointer-events: none;\n            }\n            .${Configuration.getNamespace()}-pagination__item--disable {\n                pointer-events: none;\n            }\n        `;\n        return style;\n    }\n}\n//# sourceMappingURL=Pagination.js.map","import { Configuration, CustomElementFactory } from \"duice\";\nimport { DataElementRegistry } from \"duice\";\nimport { Pagination } from \"./Pagination\";\nexport class PaginationFactory extends CustomElementFactory {\n    doCreateElement(htmlElement, bindData, context) {\n        return new Pagination(htmlElement, bindData, context);\n    }\n}\n(() => {\n    // register\n    DataElementRegistry.register(`${Configuration.getNamespace()}-pagination`, new PaginationFactory());\n})();\n//# sourceMappingURL=PaginationFactory.js.map"],"names":["CustomElement","getElementAttribute","Configuration","CustomElementFactory","DataElementRegistry"],"mappings":"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"}